window.log=function(){window.logDebugging&&console.log.apply(console,arguments)};var canvas=window.canvas=function(e){return{setMouseCoordinates:function(t){e.xm=t.x,e.ym=t.y},mapToMouse:function(t){return{x:(t.x-e.slither.xx)*e.gsc,y:(t.y-e.slither.yy)*e.gsc}},mapToCanvas:function(t){return{x:e.mww2+(t.x-e.view_xx)*e.gsc,y:e.mhh2+(t.y-e.view_yy)*e.gsc}},circleMapToCanvas:function(t){var o=canvas.mapToCanvas({x:t.x,y:t.y});return canvas.circle(o.x,o.y,t.radius*e.gsc)},point:function(e,t){return{x:Math.round(e),y:Math.round(t)}},rect:function(e,t,o,s){return{x:Math.round(e),y:Math.round(t),width:Math.round(o),height:Math.round(s)}},circle:function(e,t,o){return{x:Math.round(e),y:Math.round(t),radius:Math.round(o)}},fastAtan2:function(e,t){const o=Math.PI/4,s=3*Math.PI/4;var n=0,i=0,r=Math.abs(e)+1e-10;return t<0?(n=(t+r)/(r-t),i=s):(n=(t-r)/(t+r),i=o),i+=(.1963*n*n-.9817)*n,e<0?-i:i},setZoom:function(t){e.gsc&&(e.gsc*=Math.pow(.9,t.wheelDelta/-120||t.detail/2||0),e.desired_gsc=e.gsc)},resetZoom:function(){e.gsc=.9,e.desired_gsc=.9},maintainZoom:function(){void 0!==e.desired_gsc&&(e.gsc=e.desired_gsc)},setBackground:function(t){t=void 0!==t?t:"/s/bg45.jpg",e.ii.src=t},drawRect:function(t,o,s,n){void 0===n&&(n=1);var i=e.mc.getContext("2d"),r=canvas.mapToCanvas({x:t.x,y:t.y});i.save(),i.globalAlpha=n,i.strokeStyle=o,i.rect(r.x,r.y,t.width*e.gsc,t.height*e.gsc),i.stroke(),s&&(i.fillStyle=o,i.fill()),i.restore()},drawCircle:function(t,o,s,n){void 0===n&&(n=1),void 0===t.radius&&(t.radius=5);var i=e.mc.getContext("2d"),r=canvas.circleMapToCanvas(t);i.save(),i.globalAlpha=n,i.beginPath(),i.strokeStyle=o,i.arc(r.x,r.y,r.radius,0,2*Math.PI),i.stroke(),s&&(i.fillStyle=o,i.fill()),i.restore()},drawAngle:function(t,o,s,n,i){void 0===i&&(i=.6);var r=e.mc.getContext("2d");r.save(),r.globalAlpha=i,r.beginPath(),r.moveTo(e.mc.width/2,e.mc.height/2),r.arc(e.mc.width/2,e.mc.height/2,100*e.gsc,t,o),r.lineTo(e.mc.width/2,e.mc.height/2),r.closePath(),r.stroke(),n&&(r.fillStyle=s,r.fill()),r.restore()},drawLine:function(t,o,s,n){void 0===n&&(n=5);var i=e.mc.getContext("2d"),r=canvas.mapToCanvas(t),a=canvas.mapToCanvas(o);i.save(),i.beginPath(),i.lineWidth=n*e.gsc,i.strokeStyle=s,i.moveTo(r.x,r.y),i.lineTo(a.x,a.y),i.stroke(),i.restore()},isLeft:function(e,t,o){return(t.x-e.x)*(o.y-e.y)-(t.y-e.y)*(o.x-e.x)>0},getDistance2:function(e,t,o,s){return Math.pow(e-o,2)+Math.pow(t-s,2)},getDistance2FromSlither:function(t){return t.distance=canvas.getDistance2(e.slither.xx,e.slither.yy,t.xx,t.yy),t},unitVector:function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return t>0?{x:e.x/t,y:e.y/t}:{x:0,y:0}},pointInRect:function(e,t){return t.x<=e.x&&t.y<=e.y&&t.x+t.width>=e.x&&t.y+t.height>=e.y},pointInPoly:function(e,t){if(e.x<t.minx||e.x>t.maxx||e.y<t.miny||e.y>t.maxy)return!1;let o=!1;const s=t.pts.length;for(let n=0,i=s-1;n<s;i=n++)t.pts[n].y>e.y!=t.pts[i].y>e.y&&e.x<(t.pts[i].x-t.pts[n].x)*(e.y-t.pts[n].y)/(t.pts[i].y-t.pts[n].y)+t.pts[n].x&&(o=!o);return o},addPolyBox:function(e){var t=e.pts[0].x,o=e.pts[0].x,s=e.pts[0].y,n=e.pts[0].y;for(let i=1,r=e.pts.length;i<r;i++)e.pts[i].x<t&&(t=e.pts[i].x),e.pts[i].x>o&&(o=e.pts[i].x),e.pts[i].y<s&&(s=e.pts[i].y),e.pts[i].y>n&&(n=e.pts[i].y);return{pts:e.pts,minx:t,maxx:o,miny:s,maxy:n}},cross:function(e,t,o){return(t.x-e.x)*(o.y-e.y)-(t.y-e.y)*(o.x-e.x)},convexHullSort:function(e,t){return e.x==t.x?e.y-t.y:e.x-t.x},convexHull:function(e){e.sort(canvas.convexHullSort);var t=[];for(let o=0,s=e.length;o<s;o++){for(;t.length>=2&&canvas.cross(t[t.length-2],t[t.length-1],e[o])<=0;)t.pop();t.push(e[o])}var o=[];for(let t=e.length-1;t>=0;t--){for(;o.length>=2&&canvas.cross(o[o.length-2],o[o.length-1],e[t])<=0;)o.pop();o.push(e[t])}return o.pop(),t.pop(),t.concat(o)},circleIntersect:function(t,o){var s=t.radius+o.radius,n={};if(t.x+s>o.x&&t.y+s>o.y&&t.x<o.x+s&&t.y<o.y+s&&canvas.getDistance2(t.x,t.y,o.x,o.y)<s*s){if((n={x:(t.x*o.radius+o.x*t.radius)/s,y:(t.y*o.radius+o.y*t.radius)/s,ang:0}).ang=canvas.fastAtan2(n.y-e.slither.yy,n.x-e.slither.xx),e.visualDebugging){var i=canvas.circle(n.x,n.y,5);canvas.drawCircle(o,"#ff9900",!1),canvas.drawCircle(i,"#66ff66",!0)}return n}return!1}}}(window),bot=window.bot=function(e){return{isBotRunning:!1,isBotEnabled:!0,stage:"grow",collisionPoints:[],collisionAngles:[],foodAngles:[],scores:[],foodTimeout:void 0,sectorBoxSide:0,defaultAccel:0,sectorBox:{},currentFood:{},opt:{targetFps:20,arcSize:Math.PI/8,radiusMult:10,foodAccelSz:200,foodAccelDa:Math.PI/2,actionFrames:2,collisionDelay:10,speedBase:5.78,frontAngle:Math.PI/2,enCircleThreshold:.5625,enCircleAllThreshold:.5625,enCircleDistanceMult:20,followCircleLength:5e3,followCircleDirection:1},MID_X:0,MID_Y:0,MAP_R:0,MAXARC:0,getSlitherWidth:function(t){return void 0===t&&(t=e.slither.sc),Math.round(29*t)},quickRespawn:function(){e.dead_mtm=0,e.login_fr=0,bot.isBotRunning=!1,e.forcing=!0,bot.connect(),e.forcing=!1},connect:function(){e.force_ip&&e.force_port&&e.forceServer(e.force_ip,e.force_port),e.connect()},angleBetween:function(e,t){var o,s;return(o=(e-t)%Math.PI)<(s=(t-e)%Math.PI)?-o:s},changeHeadingAbs:function(t){var o=Math.cos(t),s=Math.sin(t);e.goalCoordinates={x:Math.round(e.slither.xx+bot.headCircle.radius*o),y:Math.round(e.slither.yy+bot.headCircle.radius*s)},canvas.setMouseCoordinates(canvas.mapToMouse(e.goalCoordinates))},changeHeadingRel:function(t){var o=e.slither.xx+500*bot.cos,s=e.slither.yy+500*bot.sin,n=Math.cos(-t),i=Math.sin(-t);e.goalCoordinates={x:Math.round(n*(o-e.slither.xx)-i*(s-e.slither.yy)+e.slither.xx),y:Math.round(i*(o-e.slither.xx)+n*(s-e.slither.yy)+e.slither.yy)},canvas.setMouseCoordinates(canvas.mapToMouse(e.goalCoordinates))},headingBestAngle:function(){var t,o,s,n=[],i=bot.getAngleIndex(e.slither.ehang)+bot.MAXARC/2;i>bot.MAXARC&&(i-=bot.MAXARC);for(var r=0;r<bot.MAXARC;r++)void 0===bot.collisionAngles[r]?(o=0,void 0===s&&(s=r)):(o=bot.collisionAngles[r].distance,s&&(n.push({openStart:s,openEnd:r-1,sz:r-1-s}),s=void 0)),(void 0===t||t.distance<o&&0!==t.distance)&&(t={distance:o,aIndex:r});s&&n[0]?(n[0].openStart=s,n[0].sz=n[0].openEnd-s,n[0].sz<0&&(n[0].sz+=bot.MAXARC)):s&&n.push({openStart:s,openEnd:s,sz:0}),n.length>0?(n.sort(bot.sortSz),bot.changeHeadingAbs((n[0].openEnd-n[0].sz/2)*bot.opt.arcSize)):bot.changeHeadingAbs(t.aIndex*bot.opt.arcSize)},avoidCollisionPoint:function(t,o){(void 0===o||o>Math.PI)&&(o=Math.PI);var s={x:e.slither.xx+2e3*bot.cos,y:e.slither.yy+2e3*bot.sin};e.visualDebugging&&(canvas.drawLine({x:e.slither.xx,y:e.slither.yy},s,"orange",5),canvas.drawLine({x:e.slither.xx,y:e.slither.yy},{x:t.x,y:t.y},"red",5)),canvas.isLeft({x:e.slither.xx,y:e.slither.yy},s,{x:t.x,y:t.y})?bot.changeHeadingAbs(t.ang-o):bot.changeHeadingAbs(t.ang+o)},getAngleIndex:function(e){var t;return e<0&&(e+=2*Math.PI),(t=Math.round(e*(1/bot.opt.arcSize)))===bot.MAXARC?0:t},addCollisionAngle:function(t){var o=canvas.fastAtan2(Math.round(t.yy-e.slither.yy),Math.round(t.xx-e.slither.xx)),s=bot.getAngleIndex(o),n=Math.round(Math.pow(Math.sqrt(t.distance)-t.radius,2));(void 0===bot.collisionAngles[s]||bot.collisionAngles[s].distance>t.distance)&&(bot.collisionAngles[s]={x:Math.round(t.xx),y:Math.round(t.yy),ang:o,slither:t.slither,distance:n,radius:t.radius,aIndex:s})},addFoodAngle:function(t){var o=canvas.fastAtan2(Math.round(t.yy-e.slither.yy),Math.round(t.xx-e.slither.xx)),s=bot.getAngleIndex(o);canvas.getDistance2FromSlither(t),(void 0===bot.collisionAngles[s]||Math.sqrt(bot.collisionAngles[s].distance)>Math.sqrt(t.distance)+bot.slitherRadius*bot.opt.radiusMult*bot.speedMult/2)&&(void 0===bot.foodAngles[s]?bot.foodAngles[s]={x:Math.round(t.xx),y:Math.round(t.yy),ang:o,da:Math.abs(bot.angleBetween(o,e.slither.ehang)),distance:t.distance,sz:t.sz,score:Math.pow(t.sz,2)/t.distance}:(bot.foodAngles[s].sz+=Math.round(t.sz),bot.foodAngles[s].score+=Math.pow(t.sz,2)/t.distance,bot.foodAngles[s].distance>t.distance&&(bot.foodAngles[s].x=Math.round(t.xx),bot.foodAngles[s].y=Math.round(t.yy),bot.foodAngles[s].distance=t.distance)))},getCollisionPoints:function(){var t;bot.collisionPoints=[],bot.collisionAngles=[];for(var o=0,s=e.slithers.length;o<s;o++)if(t=void 0,e.slithers[o].id!==e.slither.id&&1===e.slithers[o].alive_amt){var n=e.slithers[o],i=bot.getSlitherWidth(n.sc)/2,r=Math.min(1,n.sp/5.78-1);t={xx:n.xx+Math.cos(n.ehang)*i*r*bot.opt.radiusMult/2,yy:n.yy+Math.sin(n.ehang)*i*r*bot.opt.radiusMult/2,slither:o,radius:bot.headCircle.radius,head:!0},canvas.getDistance2FromSlither(t),bot.addCollisionAngle(t),bot.collisionPoints.push(t),e.visualDebugging&&canvas.drawCircle(canvas.circle(t.xx,t.yy,t.radius),"red",!1),t=void 0;for(var a=0,l=n.pts.length;a<l;a++)if(!n.pts[a].dying&&canvas.pointInRect({x:n.pts[a].xx,y:n.pts[a].yy},bot.sectorBox)){var c={xx:n.pts[a].xx,yy:n.pts[a].yy,slither:o,radius:i};e.visualDebugging,0,canvas.getDistance2FromSlither(c),bot.addCollisionAngle(c),c.distance<=Math.pow(bot.headCircle.radius+c.radius,2)&&(bot.collisionPoints.push(c),e.visualDebugging&&canvas.drawCircle(canvas.circle(c.xx,c.yy,c.radius),"red",!1))}}if(canvas.getDistance2(bot.MID_X,bot.MID_Y,e.slither.xx,e.slither.yy)>Math.pow(bot.MAP_R-1e3,2)){var d=canvas.fastAtan2(e.slither.yy-bot.MID_X,e.slither.xx-bot.MID_Y);t={xx:bot.MID_X+bot.MAP_R*Math.cos(d),yy:bot.MID_Y+bot.MAP_R*Math.sin(d),slither:-1,radius:bot.slitherWidth},canvas.getDistance2FromSlither(t),bot.collisionPoints.push(t),bot.addCollisionAngle(t),e.visualDebugging&&canvas.drawCircle(canvas.circle(t.xx,t.yy,t.radius),"yellow",!1)}if(bot.collisionPoints.sort(bot.sortDistance),e.visualDebugging)for(var u=0;u<bot.collisionAngles.length;u++)void 0!==bot.collisionAngles[u]&&canvas.drawLine({x:e.slither.xx,y:e.slither.yy},{x:bot.collisionAngles[u].x,y:bot.collisionAngles[u].y},"red",2)},inFrontAngle:function(t){var o=canvas.fastAtan2(Math.round(t.y-e.slither.yy),Math.round(t.x-e.slither.xx));return Math.abs(bot.angleBetween(o,e.slither.ehang))<bot.opt.frontAngle},checkCollision:function(){var t;if(bot.getCollisionPoints(),0===bot.collisionPoints.length)return!1;for(var o=0;o<bot.collisionPoints.length;o++){var s=canvas.circle(bot.collisionPoints[o].xx,bot.collisionPoints[o].yy,bot.collisionPoints[o].radius);if((t=canvas.circleIntersect(bot.headCircle,s))&&bot.inFrontAngle(t))return-1!==bot.collisionPoints[o].slither&&bot.collisionPoints[o].head&&e.slithers[bot.collisionPoints[o].slither].sp>10?e.setAcceleration(1):e.setAcceleration(bot.defaultAccel),bot.avoidCollisionPoint(t),!0}return e.setAcceleration(bot.defaultAccel),!1},checkEncircle:function(){for(var t,o=[],s=0,n=0,i=0;i<bot.collisionAngles.length;i++)if(void 0!==bot.collisionAngles[i]){var r=bot.collisionAngles[i].slither;o[r]?o[r]++:o[r]=1,o[r]>s&&(s=o[r],t=r),bot.collisionAngles[i].distance<Math.pow(bot.slitherRadius*bot.opt.enCircleDistanceMult,2)&&n++}return s>bot.MAXARC*bot.opt.enCircleThreshold?(bot.headingBestAngle(),s!==bot.MAXARC&&e.slithers[t].sp>10?e.setAcceleration(1):e.setAcceleration(bot.defaultAccel),e.visualDebugging&&canvas.drawCircle(canvas.circle(e.slither.xx,e.slither.yy,bot.opt.radiusMult*bot.slitherRadius),"red",!0,.2),!0):n>bot.MAXARC*bot.opt.enCircleAllThreshold?(bot.headingBestAngle(),e.setAcceleration(bot.defaultAccel),e.visualDebugging&&canvas.drawCircle(canvas.circle(e.slither.xx,e.slither.yy,bot.slitherRadius*bot.opt.enCircleDistanceMult),"yellow",!0,.2),!0):(e.visualDebugging&&canvas.drawCircle(canvas.circle(e.slither.xx,e.slither.yy,bot.slitherRadius*bot.opt.enCircleDistanceMult),"yellow"),e.setAcceleration(bot.defaultAccel),!1)},populatePts:function(){let t=e.slither.xx+e.slither.fx,o=e.slither.yy+e.slither.fy,s=0;bot.pts=[{x:t,y:o,len:s}];for(let n=e.slither.pts.length-1;n>=0;n--)if(!e.slither.pts[n].dying){let i=e.slither.pts[n].xx+e.slither.pts[n].fx,r=e.slither.pts[n].yy+e.slither.pts[n].fy,a=s+Math.sqrt(canvas.getDistance2(t,o,i,r));bot.pts.push({x:i,y:r,len:a}),t=i,o=r,s=a}bot.len=s},determineCircleDirection:function(){let t=0,o=0,s=bot.pts.length;for(let e=0;e<s;e++)t+=bot.pts[e].x,o+=bot.pts[e].y;t/=s,o/=s;let n=e.slither.xx+e.slither.fx-t;-(e.slither.yy+e.slither.fy-o)*bot.cos+n*bot.sin>0?bot.opt.followCircleDirection=-1:bot.opt.followCircleDirection=1},smoothPoint:function(e){if(e>=bot.len){let e=bot.pts[bot.pts.length-1];return{x:e.x,y:e.y}}if(e<=0)return{x:bot.pts[0].x,y:bot.pts[0].y};let t=0,o=bot.pts.length-1;for(;o-t>1;){let s=Math.round((t+o)/2);e>bot.pts[s].len?t=s:o=s}let s=bot.pts[o].len-e,n=e-bot.pts[t].len,i=s+n;return{x:(s*bot.pts[t].x+n*bot.pts[o].x)/i,y:(s*bot.pts[t].y+n*bot.pts[o].y)/i}},closestBodyPoint:function(){let t={x:e.slither.xx+e.slither.fx,y:e.slither.yy+e.slither.fy},o=bot.pts.length,s=0,n=0;for(;;){let e=n;if(s++,n=canvas.getDistance2(t.x,t.y,bot.pts[s].x,bot.pts[s].y),n<e||s==o-1)break}if(s>=o||s<=1)return bot.len;let i=s,r=n;for(let e=i+1;e<o;e++){let o=canvas.getDistance2(t.x,t.y,bot.pts[e].x,bot.pts[e].y);o<r&&(i=e,r=o)}let a=i,l=r;if(i==o-1)a=i-1,l=canvas.getDistance2(t.x,t.y,bot.pts[a].x,bot.pts[a].y);else{let e=canvas.getDistance2(t.x,t.y,bot.pts[i-1].x,bot.pts[i-1].y),o=canvas.getDistance2(t.x,t.y,bot.pts[i+1].x,bot.pts[i+1].y);e<o?(a=i-1,l=e):(a=i+1,l=o)}let c=bot.pts[i].len-bot.pts[a].len;if(c*=c,0==c)return bot.pts[i].len;{let e=c-(r-l),t=c+(r-l);return(bot.pts[i].len*e+bot.pts[a].len*t)/(2*c)}},bodyDangerZone:function(t,o,s,n,i,r){var a=e.slither.xx+e.slither.fx,l=e.slither.yy+e.slither.fy;const c=bot.opt.followCircleDirection;var d=[{x:a-c*t*bot.sin,y:l+c*t*bot.cos},{x:a+bot.slitherWidth*bot.cos+t*(bot.cos-c*bot.sin),y:l+bot.slitherWidth*bot.sin+t*(bot.sin+c*bot.cos)},{x:a+1.75*bot.slitherWidth*bot.cos+.3*c*bot.slitherWidth*bot.sin+t*(bot.cos-c*bot.sin),y:l+1.75*bot.slitherWidth*bot.sin-.3*c*bot.slitherWidth*bot.cos+t*(bot.sin+c*bot.cos)},{x:a+2.5*bot.slitherWidth*bot.cos+.7*c*bot.slitherWidth*bot.sin+t*(bot.cos-c*bot.sin),y:l+2.5*bot.slitherWidth*bot.sin-.7*c*bot.slitherWidth*bot.cos+t*(bot.sin+c*bot.cos)},{x:a+3*bot.slitherWidth*bot.cos+1.2*c*bot.slitherWidth*bot.sin+t*bot.cos,y:l+3*bot.slitherWidth*bot.sin-1.2*c*bot.slitherWidth*bot.cos+t*bot.sin},{x:o.x+s.x*(t+.5*Math.max(n,0)),y:o.y+s.y*(t+.5*Math.max(n,0))},{x:i.x+s.x*t,y:i.y+s.y*t},i,o,r],u={pts:d=canvas.convexHull(d)};return u=canvas.addPolyBox(u)},followCircleSelf:function(){bot.populatePts(),bot.determineCircleDirection();const t=bot.opt.followCircleDirection;if(bot.len<9*bot.slitherWidth)return;var o={x:e.slither.xx+e.slither.fx,y:e.slither.yy+e.slither.fy};let s=bot.closestBodyPoint(),n=bot.smoothPoint(s);var i=bot.smoothPoint(s-bot.slitherWidth),r=canvas.unitVector({x:i.x-n.x,y:i.y-n.y}),a={x:-t*r.y,y:t*r.x},l=Math.asin(Math.max(-1,Math.min(1,bot.cos*a.x+bot.sin*a.y))),c=(o.x-n.x)*a.x+(o.y-n.y)*a.y,d=5*bot.slitherWidth,u=s+5*bot.slitherWidth,h=[bot.smoothPoint(u),bot.smoothPoint(d)];for(let e=d;e<u;e+=bot.slitherWidth)h.push(bot.smoothPoint(e));var b=canvas.addPolyBox({pts:h}),g=s,p=0;let y=bot.slitherWidth/64;for(let e=c,t=l;e>=.125*bot.slitherWidth;)g-=y,p+=y*Math.cos(t),e+=y*Math.sin(t),t=Math.max(-Math.PI/4,t-y/bot.slitherWidth);var f=bot.smoothPoint(g),v=g-3*bot.slitherWidth,x=bot.smoothPoint(v),w=.25*bot.slitherWidth,m=4096*bot.slitherWidth*bot.slitherWidth;for(let t=0,o=e.slithers.length;t<o;t++)if(e.slithers[t].id!==e.slither.id&&1===e.slithers[t].alive_amt){let o={x:e.slithers[t].xx+e.slithers[t].fx,y:e.slithers[t].yy+e.slithers[t].fy},s={x:o.x+Math.cos(e.slithers[t].ang)*bot.slitherWidth,y:o.y+Math.sin(e.slithers[t].ang)*bot.slitherWidth};canvas.pointInPoly(o,b)||(m=Math.min(m,canvas.getDistance2(o.x,o.y,f.x,f.y),canvas.getDistance2(s.x,s.y,f.x,f.y)));let i=!1,r=0,l={};for(let o=0,s=e.slithers[t].pts.length;o<s;o++)if(!e.slithers[t].pts[o].dying){let s={x:e.slithers[t].pts[o].xx+e.slithers[t].pts[o].fx,y:e.slithers[t].pts[o].yy+e.slithers[t].pts[o].fy};for(;!i||w>=-bot.slitherWidth&&canvas.pointInPoly(s,l);)i?w-=.0625*bot.slitherWidth:i=!0,r=.5*(bot.slitherWidth+bot.getSlitherWidth(e.slithers[t].sc))+w,l=bot.bodyDangerZone(r,f,a,c,x,n)}}var k=Math.sqrt(m);if(e.visualDebugging)for(let e=0,t=b.pts.length;e<t;e++){let o=e+1;o==t&&(o=0),canvas.drawLine({x:b.pts[e].x,y:b.pts[e].y},{x:b.pts[o].x,y:b.pts[o].y},"orange")}if(e.visualDebugging&&canvas.drawCircle(canvas.circle(n.x,n.y,.25*bot.slitherWidth),"white",!1),e.visualDebugging&&(canvas.drawCircle(canvas.circle(f.x,f.y,bot.slitherWidth+2*p),"white",!1),canvas.drawCircle(canvas.circle(f.x,f.y,.2*bot.slitherWidth),"white",!1)),e.visualDebugging){let e=.5*bot.slitherWidth,t=bot.bodyDangerZone(e,f,a,c,x,n);for(let e=0,o=t.pts.length;e<o;e++){let s=e+1;s==o&&(s=0),canvas.drawLine({x:t.pts[e].x,y:t.pts[e].y},{x:t.pts[s].x,y:t.pts[s].y},"white")}}let I=l+.25,C=-1-(2*p-k)/bot.slitherWidth;C*=C>0?.125*C:-.5*C,I=Math.min(I,C),I=Math.min(I,I+(w-.0625*bot.slitherWidth)/bot.slitherWidth);var M=bot.len-s,S=canvas.unitVector({x:bot.opt.followCircleTarget.x-o.x,y:bot.opt.followCircleTarget.y-o.y}),A=S.x*a.x+S.y*a.y,D=bot.slitherWidth*(2-.5*A);e.visualDebugging&&canvas.drawLine({x:o.x,y:o.y},{x:o.x+D*S.x,y:o.y+D*S.y},"red"),I=Math.min(I,(M-D+(bot.slitherWidth-c))/bot.slitherWidth),I=Math.min(I,-.5*(c-4*bot.slitherWidth)/bot.slitherWidth),I=Math.max(I,-.75*c/bot.slitherWidth),I=Math.min(I,1);var P=r.x*Math.cos(I)-t*r.y*Math.sin(I),T=r.y*Math.cos(I)+t*r.x*Math.sin(I),_={x:o.x+4*P*bot.slitherWidth,y:o.y+4*T*bot.slitherWidth};e.goalCoordinates&&Math.abs(_.x-e.goalCoordinates.x)<1e3&&Math.abs(_.y-e.goalCoordinates.y)<1e3?e.goalCoordinates={x:Math.round(.25*_.x+.75*e.goalCoordinates.x),y:Math.round(.25*_.y+.75*e.goalCoordinates.y)}:e.goalCoordinates={x:Math.round(_.x),y:Math.round(_.y)},canvas.setMouseCoordinates(canvas.mapToMouse(e.goalCoordinates))},sortScore:function(e,t){return t.score-e.score},sortSz:function(e,t){return t.sz-e.sz},sortDistance:function(e,t){return e.distance-t.distance},computeFoodGoal:function(){bot.foodAngles=[];for(var t=0;t<e.foods.length&&null!==e.foods[t];t++){var o=e.foods[t];o.eaten||canvas.circleIntersect(canvas.circle(o.xx,o.yy,2),bot.sidecircle_l)||canvas.circleIntersect(canvas.circle(o.xx,o.yy,2),bot.sidecircle_r)||bot.addFoodAngle(o)}bot.foodAngles.sort(bot.sortScore),void 0!==bot.foodAngles[0]&&bot.foodAngles[0].sz>0?bot.currentFood={x:bot.foodAngles[0].x,y:bot.foodAngles[0].y,sz:bot.foodAngles[0].sz,da:bot.foodAngles[0].da}:bot.currentFood={x:bot.MID_X,y:bot.MID_Y,sz:0}},foodAccel:function(){var e=0;if(bot.currentFood&&bot.currentFood.sz>bot.opt.foodAccelSz){if(e=bot.getAngleIndex(bot.currentFood.ang),bot.collisionAngles[e]&&bot.collisionAngles[e].distance>bot.currentFood.distance+bot.slitherRadius*bot.opt.radiusMult&&bot.currentFood.da<bot.opt.foodAccelDa)return 1;if(void 0===bot.collisionAngles[e]&&bot.currentFood.da<bot.opt.foodAccelDa)return 1}return bot.defaultAccel},toCircle:function(){for(var t=0;t<e.slither.pts.length&&e.slither.pts[t].dying;t++);const o=bot.opt.followCircleDirection;var s=canvas.circle(e.slither.pts[t].xx,e.slither.pts[t].yy,bot.headCircle.radius);e.visualDebugging&&canvas.drawCircle(s,"blue",!1),e.setAcceleration(bot.defaultAccel),bot.changeHeadingRel(o*Math.PI/32),canvas.circleIntersect(bot.headCircle,s)&&(bot.stage="circle")},every:function(){bot.MID_X=e.grd,bot.MID_Y=e.grd,bot.MAP_R=.98*e.grd,bot.MAXARC=2*Math.PI/bot.opt.arcSize,void 0===bot.opt.followCircleTarget&&(bot.opt.followCircleTarget={x:bot.MID_X,y:bot.MID_Y}),bot.sectorBoxSide=Math.floor(Math.sqrt(e.sectors.length))*e.sector_size,bot.sectorBox=canvas.rect(e.slither.xx-bot.sectorBoxSide/2,e.slither.yy-bot.sectorBoxSide/2,bot.sectorBoxSide,bot.sectorBoxSide),bot.cos=Math.cos(e.slither.ang),bot.sin=Math.sin(e.slither.ang),bot.speedMult=e.slither.sp/bot.opt.speedBase,bot.slitherRadius=bot.getSlitherWidth()/2,bot.slitherWidth=bot.getSlitherWidth(),bot.slitherLength=Math.floor(15*(e.fpsls[e.slither.sct]+e.slither.fam/e.fmlts[e.slither.sct]-1)-5),bot.headCircle=canvas.circle(e.slither.xx+bot.cos*Math.min(1,bot.speedMult-1)*bot.opt.radiusMult/2*bot.slitherRadius,e.slither.yy+bot.sin*Math.min(1,bot.speedMult-1)*bot.opt.radiusMult/2*bot.slitherRadius,bot.opt.radiusMult/2*bot.slitherRadius),e.visualDebugging&&canvas.drawCircle(bot.headCircle,"blue",!1),bot.sidecircle_r=canvas.circle(e.slither.xx-(e.slither.yy+bot.sin*bot.slitherWidth-e.slither.yy),e.slither.yy+(e.slither.xx+bot.cos*bot.slitherWidth-e.slither.xx),bot.slitherWidth*bot.speedMult),bot.sidecircle_l=canvas.circle(e.slither.xx+(e.slither.yy+bot.sin*bot.slitherWidth-e.slither.yy),e.slither.yy-(e.slither.xx+bot.cos*bot.slitherWidth-e.slither.xx),bot.slitherWidth*bot.speedMult)},go:function(){bot.every(),bot.slitherLength<bot.opt.followCircleLength&&(bot.stage="grow"),bot.currentFood&&"grow"!==bot.stage&&(bot.currentFood=void 0),"circle"===bot.stage?(e.setAcceleration(bot.defaultAccel),bot.followCircleSelf()):bot.checkCollision()||bot.checkEncircle()?bot.actionTimeout&&(e.clearTimeout(bot.actionTimeout),bot.actionTimeout=e.setTimeout(bot.actionTimer,1e3/bot.opt.targetFps*bot.opt.collisionDelay)):(bot.slitherLength>bot.opt.followCircleLength&&(bot.stage="tocircle"),void 0===bot.actionTimeout&&(bot.actionTimeout=e.setTimeout(bot.actionTimer,1e3/bot.opt.targetFps*bot.opt.actionFrames)),e.setAcceleration(bot.foodAccel()))},actionTimer:function(){e.playing&&null!==e.slither&&1===e.slither.alive_amt&&("grow"===bot.stage?(bot.computeFoodGoal(),e.goalCoordinates=bot.currentFood,canvas.setMouseCoordinates(canvas.mapToMouse(e.goalCoordinates))):"tocircle"===bot.stage&&bot.toCircle()),bot.actionTimeout=void 0}}}(window),userInterface=window.userInterface=function(e,t){var o=t.onkeydown,s=e.onmousedown,n=e.oef,i=e.redraw,r=e.onmousemove;return e.oef=function(){},e.redraw=function(){},{overlays:{},gfxEnabled:!0,initServerIp:function(){var e=t.getElementById("playh"),o=t.createElement("div"),s=t.createElement("input");o.style.width="244px",o.style.margin="-30px auto",o.style.boxShadow="rgb(0, 0, 0) 0px 6px 50px",o.style.opacity=1,o.style.background="rgb(76, 68, 124)",o.className="taho",o.style.display="block",s.className="sumsginp",s.placeholder="0.0.0.0:444",s.maxLength=21,s.style.width="220px",s.style.height="24px",o.appendChild(s),e.appendChild(o),userInterface.server=s},initOverlays:function(){var e=t.createElement("div");e.style.position="fixed",e.style.right="5px",e.style.bottom="112px",e.style.width="150px",e.style.height="85px",e.style.color="#C0C0C0",e.style.fontFamily="Consolas, Verdana",e.style.zIndex=999,e.style.fontSize="14px",e.style.padding="5px",e.style.borderRadius="5px",e.className="nsi",t.body.appendChild(e);var o=t.createElement("div");o.style.position="fixed",o.style.right="5px",o.style.bottom="5px",o.style.width="160px",o.style.height="14px",o.style.color="#C0C0C0",o.style.fontFamily="Consolas, Verdana",o.style.zIndex=999,o.style.fontSize="14px",o.className="nsi",t.body.appendChild(o);var s=t.createElement("div");s.style.position="fixed",s.style.left="10px",s.style.top="75px",s.style.width="260px",s.style.height="210px",s.style.color="#C0C0C0",s.style.fontFamily="Consolas, Verdana",s.style.zIndex=999,s.style.fontSize="14px",s.style.padding="5px",s.style.borderRadius="5px",s.className="nsi",t.body.appendChild(s);var n=t.createElement("div");n.style.position="fixed",n.style.left="10px",n.style.top="295px",n.style.width="140px",n.style.height="210px",n.style.color="#C0C0C0",n.style.fontFamily="Consolas, Verdana",n.style.zIndex=998,n.style.fontSize="14px",n.style.padding="5px",n.style.borderRadius="5px",n.className="nsi",t.body.appendChild(n),userInterface.overlays.botOverlay=e,userInterface.overlays.serverOverlay=o,userInterface.overlays.prefOverlay=s,userInterface.overlays.statsOverlay=n},toggleOverlays:function(){Object.keys(userInterface.overlays).forEach((function(t){var o="hidden"!==userInterface.overlays[t].style.visibility?"hidden":"visible";userInterface.overlays[t].style.visibility=o,e.visualDebugging="visible"===o}))},toggleGfx:function(){if(userInterface.gfxEnabled){var o=e.mc.getContext("2d");o.save(),o.fillStyle="#000000",o.fillRect(0,0,e.mww,e.mhh),o.restore();var s=t.createElement("div");s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.width="200px",s.style.height="60px",s.style.color="#C0C0C0",s.style.fontFamily="Consolas, Verdana",s.style.zIndex=999,s.style.margin="-30px 0 0 -100px",s.style.fontSize="20px",s.style.textAlign="center",s.className="nsi",t.body.appendChild(s),userInterface.gfxOverlay=s,e.lbf.innerHTML=""}else t.body.removeChild(userInterface.gfxOverlay),userInterface.gfxOverlay=void 0;userInterface.gfxEnabled=!userInterface.gfxEnabled},savePreference:function(t,o){e.localStorage.setItem(t,o),userInterface.onPrefChange()},loadPreference:function(t,o){var s=e.localStorage.getItem(t);return null!==s?(e[t]="true"===s||"false"!==s&&s,e.log("Setting found for "+t+": "+e[t])):(e[t]=o,e.log("No setting found for "+t+". Used default: "+e[t])),userInterface.onPrefChange(),e[t]},playButtonClickListener:function(){if(userInterface.saveNick(),userInterface.loadPreference("autoRespawn",!1),userInterface.onPrefChange(),userInterface.server.value){let t=userInterface.server.value.split(":");2===t.length&&(e.force_ip=t[0],e.force_port=t[1],bot.connect())}else e.force_ip=void 0,e.force_port=void 0},saveNick:function(){var e=t.getElementById("nick").value;userInterface.savePreference("savedNick",e)},hideTop:function(){for(var o=t.querySelectorAll("div.nsi"),s=0;s<o.length;s++)"4px"===o[s].style.top&&"300px"===o[s].style.width&&(o[s].style.visibility="hidden",bot.isTopHidden=!0,e.topscore=o[s])},framesPerSecond:{fps:0,fpsTimer:function(){e.playing&&e.fps&&e.lrd_mtm&&Date.now()-e.lrd_mtm>970&&(userInterface.framesPerSecond.fps=e.fps)}},onkeydown:function(t){o(t),e.playing&&(84===t.keyCode&&(bot.isBotEnabled=!bot.isBotEnabled),85===t.keyCode&&(e.logDebugging=!e.logDebugging,console.log("Log debugging set to: "+e.logDebugging),userInterface.savePreference("logDebugging",e.logDebugging)),89===t.keyCode&&(e.visualDebugging=!e.visualDebugging,console.log("Visual debugging set to: "+e.visualDebugging),userInterface.savePreference("visualDebugging",e.visualDebugging)),73===t.keyCode&&(e.autoRespawn=!e.autoRespawn,console.log("Automatic Respawning set to: "+e.autoRespawn),userInterface.savePreference("autoRespawn",e.autoRespawn)),72===t.keyCode&&userInterface.toggleOverlays(),71===t.keyCode&&userInterface.toggleGfx(),79===t.keyCode&&userInterface.toggleMobileRendering(!e.mobileRender),65===t.keyCode&&(bot.opt.radiusMult++,console.log("radiusMult set to: "+bot.opt.radiusMult)),83===t.keyCode&&bot.opt.radiusMult>1&&(bot.opt.radiusMult--,console.log("radiusMult set to: "+bot.opt.radiusMult)),90===t.keyCode&&canvas.resetZoom(),81===t.keyCode&&(e.autoRespawn=!1,userInterface.quit()),27===t.keyCode&&bot.quickRespawn(),userInterface.onPrefChange())},onmousedown:function(t){if(e.playing){if(1===t.which)bot.defaultAccel=1,bot.isBotEnabled||s(t)}else s(t);userInterface.onPrefChange()},onmouseup:function(){bot.defaultAccel=0},toggleMobileRendering:function(t){e.mobileRender=t,e.log("Mobile rendering set to: "+e.mobileRender),userInterface.savePreference("mobileRender",e.mobileRender),e.mobileRender?(e.render_mode=1,e.want_quality=0,e.high_quality=!1):(e.render_mode=2,e.want_quality=1,e.high_quality=!0)},updateStats:function(){var e,t=[];if(0!==bot.scores.length){e=Math.round((bot.scores[Math.floor((bot.scores.length-1)/2)]+bot.scores[Math.ceil((bot.scores.length-1)/2)])/2),t.push("games played: "+bot.scores.length),t.push("a: "+Math.round(bot.scores.reduce((function(e,t){return e+t}))/bot.scores.length)+" m: "+e);for(var o=0;o<bot.scores.length&&o<10;o++)t.push(o+1+". "+bot.scores[o]);userInterface.overlays.statsOverlay.innerHTML=t.join("<br/>")}},onPrefChange:function(){var t=[],o=userInterface.handleTextColor;t.push("version: "+GM_info.script.version),t.push("[T] bot: "+o(bot.isBotEnabled)),t.push("[O] mobile rendering: "+o(e.mobileRender)),t.push("[A/S] radius multiplier: "+bot.opt.radiusMult),t.push("[I] auto respawn: "+o(e.autoRespawn)),t.push("[Y] visual debugging: "+o(e.visualDebugging)),t.push("[U] log debugging: "+o(e.logDebugging)),t.push("[Mouse Wheel] zoom"),t.push("[Z] reset zoom"),t.push("[ESC] quick respawn"),t.push("[Q] quit to menu"),userInterface.overlays.prefOverlay.innerHTML=t.join("<br/>")},onFrameUpdate:function(){if(e.playing&&null!==e.slither){let t=[];if(t.push("fps: "+userInterface.framesPerSecond.fps),t.push("x: "+(Math.round(e.slither.xx)||0)+" y: "+(Math.round(e.slither.yy)||0)),e.goalCoordinates&&(t.push("target"),t.push("x: "+e.goalCoordinates.x+" y: "+e.goalCoordinates.y),e.goalCoordinates.sz&&t.push("sz: "+e.goalCoordinates.sz)),userInterface.overlays.botOverlay.innerHTML=t.join("<br/>"),userInterface.gfxOverlay){let t=[];t.push("<b>"+e.slither.nk+"</b>"),t.push(bot.slitherLength),t.push("["+e.rank+"/"+e.slither_count+"]"),userInterface.gfxOverlay.innerHTML=t.join("<br/>")}void 0!==e.bso&&userInterface.overlays.serverOverlay.innerHTML!==e.bso.ip+":"+e.bso.po&&(userInterface.overlays.serverOverlay.innerHTML=e.bso.ip+":"+e.bso.po)}if(e.playing&&e.visualDebugging&&e.goalCoordinates&&bot.isBotEnabled){var t={x:e.slither.xx,y:e.slither.yy};canvas.drawLine(t,e.goalCoordinates,"green"),canvas.drawCircle(e.goalCoordinates,"red",!0)}},oefTimer:function(){var t=Date.now();canvas.maintainZoom(),n(),userInterface.gfxEnabled?i():e.visualDebugging=!1,e.playing&&bot.isBotEnabled&&null!==e.slither?(e.onmousemove=function(){},bot.isBotRunning=!0,bot.go()):bot.isBotEnabled&&bot.isBotRunning&&(bot.isBotRunning=!1,e.lastscore&&e.lastscore.childNodes[1]&&(bot.scores.push(parseInt(e.lastscore.childNodes[1].innerHTML)),bot.scores.sort((function(e,t){return t-e})),userInterface.updateStats()),e.autoRespawn&&bot.connect()),bot.isBotEnabled&&bot.isBotRunning||(e.onmousemove=r),userInterface.onFrameUpdate(),bot.isBotEnabled||e.no_raf?setTimeout(userInterface.oefTimer,1e3/bot.opt.targetFps-(Date.now()-t)):e.raf(userInterface.oefTimer)},quit:function(){e.playing&&e.resetGame&&(e.want_close_socket=!0,e.dead_mtm=0,e.play_btn&&e.play_btn.setEnabled(!0),e.resetGame())},handleTextColor:function(e){return'<span style="color:'+(e?'green;">enabled':'red;">disabled')+"</span>"}}}(window,document),ss=window.ss={mods:[],options:{leaderBoardTitle:"Slither Sessions",rotateSkins:!1,useLastHost:!1},version:function(){return"2.2.20"},isInt:function(e){return!isNaN(e)&&Number(e)===e&&e%1==0},connect:function(){if(ss.options.useLastHost){var e=ss.loadOption("lastHost");if(e&&e.length>0){var t=e.split(":")[0].trim(),o=e.split(":")[1].trim();forceServer(t,o)}}window.connect()},connectToHost:function(){if(defaultIp=ss.loadOption("lastHost",""),eipaddr=prompt("Enter the IP address:",defaultIp),eipaddr&&-1!=eipaddr.indexOf(":")&&-1!=eipaddr.indexOf(".")){ss.saveOption("lastHost",eipaddr);var e=eipaddr.split(":")[0].trim(),t=eipaddr.split(":")[1].trim();forceServer(e,t),connect(),ss.waitForSlither((function(e){setSkin(e,ss.skins.skin)}))}},currentIp:function(){return"undefined"!=typeof bso&&bso.ip+":"+bso.po},forceLastHost:function(){var e=ss.loadOption("lastHost");if(e&&e.length>0){var t=e.split(":")[0].trim(),o=e.split(":")[1].trim();forceServer(t,o)}},register:function(e){return ss.mods.push(e),ss[e.slug]=e,ss},quit:function(){return window.userInterface.quit()},saveOption:function(e,t){return window.userInterface.savePreference(e,t)},setBackground:function(e){e=void 0!==e?e:"/s/bg45.jpg",window.ii.src=e},loadOption:function(e,t){return window.userInterface.loadPreference(e,t)},log:function(){window.logDebugging&&console.log.apply(console,arguments)},onFrameUpdate:function(){if(window.playing&&null!==window.slither){if(window.playing&&null!==window.slither){let e=[];if(e.push("fps: "+userInterface.framesPerSecond.fps),e.push("x: "+(Math.round(window.slither.xx)||0)+" y: "+(Math.round(window.slither.yy)||0)),window.goalCoordinates&&(e.push("target"),e.push("x: "+window.goalCoordinates.x+" y: "+window.goalCoordinates.y),window.goalCoordinates.sz&&e.push("sz: "+window.goalCoordinates.sz)),userInterface.overlays.botOverlay.innerHTML=e.join("<br/>"),userInterface.gfxOverlay){let e=[];e.push("<b>"+window.slither.nk+"</b>"),e.push(bot.slitherLength),e.push("["+window.rank+"/"+window.slither_count+"]"),userInterface.gfxOverlay.innerHTML=e.join("<br/>")}}if(window.playing&&window.visualDebugging&&window.goalCoordinates&&bot.isBotEnabled){var e={x:window.slither.xx,y:window.slither.yy};canvas.drawLine(e,window.goalCoordinates,"green"),canvas.drawCircle(window.goalCoordinates,"red",!0)}$(userInterface.connect).is(":visible")&&$(userInterface.connect).fadeOut(),void 0!==window.lbh&&window.lbh.textContent!=ss.options.leaderBoardTitle&&(window.log("[SS] Updated leaderboard title: "+ss.options.leaderBoardTitle),window.lbh.textContent=ss.options.leaderBoardTitle),void 0!==window.bso&&userInterface.overlays.serverOverlay.innerHTML!==window.bso.ip+":"+window.bso.po&&(userInterface.overlays.serverOverlay.innerHTML=window.bso.ip+":"+window.bso.po,ss.saveOption("lastHost",window.bso.ip+":"+window.bso.po),void 0!==ss.onHostChanged&&ss.onHostChanged())}else $(userInterface.connect).is(":visible")||$(userInterface.connect).fadeIn()},onHostChanged:function(){},waitForSlither:function(e,t){ss.isInt(t)||(t=4);var o=0;return function s(){if(!(o>t))return window.slither?void e(window.slither):(ss.log("[SS] waiting for slither r="+o+"..."),++o,void setTimeout(s,300))}()},quit:function(){userInterface.quit()}};function asciize(e,t){var o,s,n;s=e.length;var i=!1;for(o=0;o<s;o++)if(32>(n=e.charCodeAt(o))||127<n){i=!0;break}if(i){for(i="",o=0;o<s;o++)i=32>(n=e.charCodeAt(o))||127<n?i+" ":i+String.fromCharCode(n);return i}var r=s<20?" ":"",a=$("#tag").val().length>0?$("#tag").val()+r:"";return t?e:a+e}ss.register({slug:"resources",images:{foxyHead:"https://i.imgur.com/Adp9ep6.png",spykeLogo:"https://i.imgur.com/qWEVxy4.png",hazardLogo:"https://i.imgur.com/zeyVDy1.png",ssLogo:"https://i.imgur.com/4DurTms.png",thomasLogo:"https://i.imgur.com/z8xXOdH.png",slitherClipsLogo:"https://i.imgur.com/XR0Mkyy.png",jokerHead:"https://i.imgur.com/SBI0UvE.png",kawaii:"https://i.imgur.com/33HY70E.png",yondubr:"https://i.imgur.com/jSFdefH.png",mopeXLogo:"https://i.imgur.com/OXDCZL1.png",teddyBear:"https://i.imgur.com/a12yUWw.png",kitkatAngel:"https://i.imgur.com/1M0nT6T.png",tdkCassette:"https://i.imgur.com/y1MWxyG.png",psychoSmith:"https://i.imgur.com/hvDkhAI.png"},init:function(){}}),ss.register(function(){var e=function(e,t){return e||t},t={superMaxSkinCv:window.max_skin_cv,superSetSkin:window.setSkin,bulb:null,addAntenna:function(o,s){if(null==t.bulb&&(t.bulb=document.createElement("canvas"),t.bulb.style.display=!1),null!=o.bulb&&void 0!==o.bulb||(o.bulb=t.bulb),s.bulb&&s.bulb.image){var n=new Image;n.onload=function(){o.bulb.width=parseInt(n.width),o.bulb.height=parseInt(n.height),o.bulb.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,n.width,n.height),n=null,o.atax=[0,0,0,0],o.atay=[0,0,0,0],o.atvx=[0,-2.174018144607544,-1.9938501119613647,-2.2244787216186523,-2.1016628742218018,-2.0143206119537354,-2.095236301422119,-2.2232143878936768,-1.9363921880722046],o.atvy=[0,-.7573261260986328,-.7961844801902771,-.3080170750617981,.2950030565261841,.8237428069114685,.568598210811615,.027775723487138748,-.6246974468231201],o.atx=[10792,10788.1982421875,10784.205078125,10780.369140625,10776.814453125,10773.0830078125,10769.091796875,10765.2275390625,10761.48046875],o.aty=[10800,10799.658203125,10798.2373046875,10796.662109375,10795.90625,10796.720703125,10798.310546875,10799.6298828125,10799.82421875],o.atba=0,o.atia=e(s.antenna.alpha,1),o.atc1=e(s.antenna.color1,"#800"),o.atc2=e(s.antenna.color2,"#b00"),s.bulb&&(o.bsc=e(s.bulb.scale,.25),o.blba=e(s.bulb.alpha,1),o.blbw=e(s.bulb.width,o.bulb.width),o.blbh=e(s.bulb.height,o.bulb.height),o.blbx=e(s.bulb.x,o.bulb.width/2*-1),o.blby=e(s.bulb.y,o.bulb.width/2*-1)),o.atwg=!0,o.abrot=!0,o.antenna_shown=!0,o.antenna=!0},n.src=s.bulb.image}},setupSkins:function(){o.extras.length>0||(o.add({rbcs:[9,9,9,13,13,13],stockSkinId:3}).add({rbcs:[9,9,9,11,11,11],stockSkinId:33}).add({rbcs:[0,0,0,8,8,8],stockSkinId:8}).add({rbcs:[11],stockSkinId:25}).add({rbcs:[11,9,11,7,7,7],stockSkinId:7,antenna:{alpha:1,color1:"#800",color2:"#B00"},bulb:{image:ss.resources.images.spykeLogo,scale:.3,alpha:1,x:-16,y:-70}}).add({rbcs:[5,5,5,11,11,11],stockSkinId:20}).add({rbcs:[12,12,12,11,11,11],stockSkinId:33,antenna:{alpha:1,color1:"#000000",color2:"#EDA407"},bulb:{image:ss.resources.images.ssLogo,scale:.3,alpha:1,x:-12,y:-86}}).add({rbcs:[6,6,6,6,12,12,12,12],stockSkinId:6,antenna:{alpha:.5,color1:"#9E706F",color2:"#F2A8A6"},bulb:{image:ss.resources.images.thomasLogo,scale:.5,alpha:1,x:-16,y:-50}}).add({rbcs:[9,9,9,9,9,9,9,12,12,12,12,12,12,12],stockSkinId:5}).add({rbcs:[3,3,3,3,3,3,3,9,9,9,9,9,9,9],stockSkinId:3}).add({rbcs:[9,9,9,9,9,9,9,3,3,3,3,3,3,3],stockSkinId:3}).add({rbcs:[17,17,17,17,17,17,17,9,9,9,9,9,9,9],stockSkinId:0}).add({rbcs:[9,9,9,9,9,9,9,17,17,17,17,17,17,17],stockSkinId:0}).add({rbcs:[23,23,23,23,23,23,23,9,9,9,9,9,9,9],stockSkinId:2}).add({rbcs:[9,9,9,9,9,9,9,23,23,23,23,23,23,23],stockSkinId:2}).add({rbcs:[18,18,18,18,18,18,18,9,9,9,9,9,9,9],stockSkinId:4}).add({rbcs:[22,22,22,22,22,22,22,9,9,9,9,9,9,9],stockSkinId:5}).add({rbcs:[7,7,7,7,18,18,18,18],stockSkinId:18}).add({rbcs:[26,26,26,26,26,26,26,27,27,27,27,27,27,27],stockSkinId:12}).add({rbcs:[27,27,27,27,27,27,27,26,26,26,26,26,26,26],stockSkinId:12}).add({rbcs:[0,17],stockSkinId:0}).add({rbcs:[11,11,13,13],stockSkinId:27,antenna:{alpha:.5,color1:"#252525",color2:"#646464"},bulb:{image:ss.resources.images.slitherClipsLogo,scale:.16,alpha:1,x:-15,y:-146}}).add({rbcs:[11,26,26,26],stockSkinId:27,antenna:{alpha:.5,color1:"#252525",color2:"#646464"},bulb:{image:ss.resources.images.jokerHead,scale:.1,alpha:1,x:-18,y:-320}}).add({rbcs:[29,29,11,31,11],stockSkinId:54}).add({rbcs:[29,29,11,34,11],stockSkinId:8}).add({rbcs:[29,29,11,34,11],stockSkinId:8,antenna:{alpha:.5,color1:"#252525",color2:"#646464"},bulb:{image:ss.resources.images.kawaii,scale:.2,alpha:1,x:-80,y:-108}}).add({rbcs:[33,33,33,29,29,29],stockSkinId:56}).add({rbcs:[33,33,33,32,32,32],stockSkinId:55}).add({rbcs:[35,35,35,35,35,35,35,33,33,33,33,33,33,33],stockSkinId:56}).add({rbcs:[33,33,33,33,33,33,33,35,35,35,35,35,35,35],stockSkinId:58}).add({rbcs:[29,29,11,29,11],stockSkinId:44}).add({rbcs:[29,29,29,29,29,31,31,31,31,31,32,32,32,32,32],stockSkinId:11}).add({rbcs:[11,11,11,11,11,9,9,9,9,9,18,18,18,18,18],stockSkinId:4,antenna:{alpha:.5,color1:"#252525",color2:"#646464"},bulb:{image:ss.resources.images.yondubr,scale:.13,alpha:1,x:-90,y:-140}}).add({rbcs:[29,29,29,29,32,32,32,32,32,32],stockSkinId:55}).add({rbcs:[31,31,31,7,29,7],stockSkinId:54,antenna:{alpha:.5,color1:"#e52525",color2:"#c46464"},bulb:{image:ss.resources.images.foxyHead,scale:.135,alpha:1,x:-90,y:-160}}).add({rbcs:[7,7,7,7,7,14,14,14,7,7,9,7,9,7,7,7,7,7,7,7,14,14,14,14,14,7,7,7,14,14,9,14,9,14,14,14,14,14,14,14],stockSkinId:55}).add({rbcs:[4,4,4,4,4,13,13,13,13,13,9,9,9,9,9],stockSkinId:54,antenna:{alpha:.5,color1:"#252525",color2:"#646464"},bulb:{image:ss.resources.images.mopeXLogo,scale:.72,alpha:1,x:-25,y:-20}}).add({rbcs:[33,33,33,12],stockSkinId:4,antenna:{alpha:.5,color2:"#c78b31",color1:"#966308"},bulb:{image:ss.resources.images.teddyBear,scale:.22,alpha:1,x:-100,y:-80}}).add({rbcs:[34,34,34,34,29,11,11,11,11,29],stockSkinId:8,antenna:{alpha:.5,color2:"#f740ff",color1:"#f740ff"},bulb:{image:ss.resources.images.kitkatAngel,scale:.7,alpha:1,x:-46,y:-56,width:100,height:100}}).add({rbcs:[5,5,5,5,5,5,5,11,9,11],stockSkinId:5,antenna:{alpha:.5,color2:"#333333",color1:"#222222"},bulb:{image:ss.resources.images.tdkCassette,scale:.205,alpha:1,x:-22,y:-94}}).add({rbcs:[31,31,31,31,31,9,11,11,11,11,11,11,9],stockSkinId:7,antenna:{alpha:.5,color2:"#222",color1:"#333"},bulb:{image:ss.resources.images.psychoSmith,scale:.52,alpha:1,width:100,height:100,x:-18,y:-50}}),window.setSkin=function(e,s,n){s=parseInt(s);var i=$("#psk").is(":visible");if(i&&void 0===e.rcv?s=o.savedSkin:i&&(o.skin=s),t.resetAntenna(e),t.superSetSkin(e,s,n),(i||window.slither===e)&&(e.SSkin=!1,s>t.superMaxSkinCv)){var r,a=o.get(s);null!==a?(r=a.rbcs,e.SSkin=!0):s%=9,r&&(s=r[0]),e.rbcs=r,e.cv=s,a&&(a.antenna||a.bulb)&&t.addAntenna(e,a)}})},loop:function(){o.rotate(),setTimeout(t.loop,1500)},resetAntenna:function(e){e.bulb=null}},o={slug:"skins",skin:0,savedSkin:0,extras:[],init:function(){o.skin=parseInt(ss.loadOption("skinId",0)),ss.isInt(o.skin)&&void 0!==o.skin&&!isNaN(o.skin)||(o.skin=0),o.savedSkin=o.skin,t.setupSkins(),t.loop(),o.setStockSkin(o.savedSkin),(b=document.getElementsByClassName("sadg1")[1])&&b.addEventListener("click",(function(){ss.skins.savedSkin=ss.skins.skin,ss.saveOption("skinId",ss.skins.savedSkin),window.slither.rcv=ss.skins.setStockSkin(ss.skins.savedSkin)}),!1)},add:function(e){return void 0===e.rbcs||null==e.rbcs||e.rbcs.length<=0||(o.extras.push(e),window.max_skin_cv+=1),o},get:function(e){return e<=t.superMaxSkinCv||e>max_skin_cv?null:o.extras[e-t.superMaxSkinCv-1]},rotate:function(){haveSlither=void 0!==window.ws&&!$("#psk").is(":visible")&&void 0!==window.slither&&null!=window.slither,haveSlither&&(ss.options.rotateSkins?o.next():(o.skin>t.superMaxSkinCv&&!slither.SSkin||o.skin!==slither.rcv&&!slither.SSkin)&&setSkin(slither,o.skin))},next:function(){void 0!==window.slither&&(o.skin+=1,o.skin>max_skin_cv&&(o.skin=0),setSkin(window.slither,o.skin))},previous:function(){void 0!==window.slither&&(o.skin<=0?o.skin=max_skin_cv:o.skin-=1,setSkin(window.slither,o.skin))},setStockSkin:function(e){if(e<t.superMaxSkinCv)return e;var s=0,n=o.get(e);return n&&(s=n.stockSkinId)?(localStorage.slitherrcv=s,s):(ss.log("setStockSkin: Failed to get skin's stockSkinId, or none has been                  defined. Stock skin remains "+e+"."),e)}};return o}()),ss.register(function(){var e=["SS","AYE","BIG","JG","YBR","YT"];return{slug:"clans",tags:e,init:function(){!function(){window.nick.oninput=function(){self=window.nick;var e=self.value,t=asciize(e,!0);24<t.length&&(t=t.substr(0,24)),e!=t&&(self.value=t)},$(".taho").before('<div id="ss-tag-holder" class="taho"><select class="sumsginp" id="tag"></select></div>'),$("#tag").change((function(){ss.saveOption("savedClan",$(this).val())})),$("#tag").append("<option value=''>---</option>");for(var t=0;t<e.length;++t){var o=e[t];$("#tag").append("<option value='["+o+"]'>["+o+"]</option>")}}()}}}()),canvas.setZoom=function(e){window.gsc&&window.ss&&window.ss.options.useZoom&&(window.gsc*=Math.pow(.9,e.wheelDelta/-120||e.detail/2||0),window.desired_gsc=window.gsc)},canvas.maintainZoom=function(){void 0!==window.desired_gsc&&window.ss&&window.ss.options.useZoom&&(window.gsc=window.desired_gsc)},userInterface.onFrameUpdate=function(){void 0!==window.ss&&window.ss.onFrameUpdate()},userInterface.superOefTimer=userInterface.oefTimer,userInterface.oefTimer=function(){userInterface.superOefTimer()},userInterface.removeLogo=function(){void 0!==window.showlogo_iv&&(window.ncka=window.lgss=window.lga=1,clearInterval(window.showlogo_iv),showLogo(!0))},userInterface.toggleOverlays=function(){Object.keys(userInterface.overlays).forEach((function(e){if(!("ss-server-overlay"==userInterface.overlays[e].id)){var t="hidden"!==userInterface.overlays[e].style.visibility?"hidden":"visible";userInterface.overlays[e].style.visibility=t}}))},userInterface.ssOnKeyDown=function(e){if(userInterface.onkeydown(e),window.playing){if(66===e.keyCode){var t=prompt("Please enter a background url:");null!==t&&ss.setBackground(t)}if(76===e.keyCode&&(ss.options.rotateSkins=!ss.options.rotateSkins,userInterface.savePreference("rotateSkins",ss.options.rotateSkins)),75===e.keyCode&&ss.skins.next(),74===e.keyCode&&ss.skins.previous(),80===e.keyCode&&(ss.options.useLastHost=!ss.options.useLastHost),88===e.keyCode&&(ss.options.useZoom=!ss.options.useZoom,ss.saveOption("useZoom",ss.options.useZoom),ss.options.useZoom||canvas.resetZoom()),221===e.keyCode){var o=document.getElementById("ss-server-overlay"),s="hidden"!==o.style.visibility?"hidden":"visible";o.style.visibility=s}49===e.keyCode&&canvas.setBackground(),50===e.keyCode&&canvas.setBackground("https://github.com/SlitherSessions/ss-mods/blob/master/mods/images/bg-1.jpg?raw=true"),userInterface.onPrefChange()}},userInterface.onPrefChange=function(){var e=[],t=userInterface.handleTextColor;e.push("version: "+window.ss.version()),e.push("[T / Right click] bot: "+t(bot.isBotEnabled)),e.push("[O] mobile rendering: "+t(window.mobileRender)),e.push("[A/S] radius multiplier: "+bot.opt.radiusMult),e.push("[I] auto respawn: "+t(window.autoRespawn)),e.push("[G] leaderboard overlay: "+t(window.leaderboard)),e.push("[Y] visual debugging: "+t(window.visualDebugging)),e.push("[U] log debugging: "+t(window.logDebugging)),e.push("[H] overlays"),e.push("[B] change background"),e.push("[Mouse Wheel] zoom"),e.push("[X] zoom enabled: "+t(ss.options.useZoom)),e.push("[Z] reset zoom"),e.push("[L] rotate skins: "+t(ss.options.rotateSkins)),e.push("[K] next skin"),e.push("[J] previous skin"),e.push("[P] use static host: "+t(ss.options.useLastHost)),e.push("[ESC] quick respawn"),e.push("[Q] quit to menu"),userInterface.overlays.prefOverlay.innerHTML=e.join("<br/>")},userInterface.playButtonClickListener=function(){userInterface.saveNick(),userInterface.loadPreference("autoRespawn",!1),userInterface.onPrefChange(),canvas.resetZoom(),ss.options.useLastHost&&ss.forceLastHost(),ss.waitForSlither((function(e){setSkin(e,ss.skins.skin)}))},function(t,o){userInterface.initOverlays(),ss.loadOption("logDebugging",!1),ss.loadOption("visualDebugging",!1),ss.loadOption("autoRespawn",!0),ss.loadOption("mobileRender",!1),ss.options.useZoom=ss.loadOption("useZoom",!0),ss.options.rotateSkins=ss.loadOption("rotateSkins",!1),t.addEventListener("keydown",userInterface.ssOnKeyDown),t.addEventListener("mousedown",userInterface.onmousedown),t.addEventListener("mouseup",userInterface.onmouseup),bot.isBotEnabled=!1,bot.opt.followCircleLength=8e3,bot.opt.targetFps=30,userInterface.hideTop();var s=o.createElement("div");s.id="ss-ip-box",s.className="nsi";var n=o.createElement("label");n.innerHTML="Connect to IP",n.className="on",n.id="ss-ip-connect",n.addEventListener("click",ss.connectToHost),s.appendChild(n),o.body.appendChild(s),userInterface.connect=s,userInterface.overlays.serverOverlay.id="ss-server-overlay",userInterface.overlays.serverOverlay.style.position="fixed",userInterface.overlays.serverOverlay.style.left="140px",userInterface.overlays.serverOverlay.style.bottom="10px",userInterface.overlays.serverOverlay.style.width="400px",userInterface.overlays.serverOverlay.style.height="42px",userInterface.overlays.serverOverlay.style.color="#C0C0C0",userInterface.overlays.serverOverlay.style.fontFamily="Consolas, Verdana",userInterface.overlays.serverOverlay.style.zIndex=999,userInterface.overlays.serverOverlay.style.fontSize="42px",userInterface.overlays.serverOverlay.style.overflow="visible",userInterface.overlays.serverOverlay.className="nsi",userInterface.overlays.statsOverlay.style.top="400px",o.body.addEventListener("mousewheel",canvas.setZoom),o.body.addEventListener("DOMMouseScroll",canvas.setZoom),t.mobileRender&&userInterface.toggleMobileRendering(!0),t.localStorage.setItem("edttsg","1"),userInterface.removeLogo(),t.social.remove(),setInterval(userInterface.framesPerSecond.fpsTimer,80),t.onload=function(){ss.mods.forEach((function(e,t,o){void 0!==e.init&&e.init()})),t.nick.value=ss.loadOption("savedNick","Robot"),(e=o.getElementById("tag"))&&(e.value=ss.loadOption("savedClan","[SS]")),t.play_btn.btnf.addEventListener("click",userInterface.playButtonClickListener),userInterface.oefTimer()}}(window,document);
